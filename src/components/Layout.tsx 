import { useEffect, ReactNode } from 'react';

interface LayoutProps {
  children: ReactNode;
}

const Layout = ({ children }: LayoutProps) => {
  useEffect(() => {
    // ========================================
    // ðŸŽ¯ PIXEL DA UTMIFY (RASTREAMENTO DE UTMs)
    // ========================================
    if (typeof window !== 'undefined') {
      (window as any).pixelId = "6958552db15cc93a035a8d66";
      const utmifyScript = document.createElement("script");
      utmifyScript.setAttribute("async", "");
      utmifyScript.setAttribute("defer", "");
      utmifyScript.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
      document.head.appendChild(utmifyScript);
      console.log('âœ… Pixel Utmify carregado');
    }

    // ========================================
    // ðŸŽ¯ CONFIGURAÃ‡ÃƒO DAS UTMs DO FACEBOOK ADS
    // ========================================
    if (typeof window !== 'undefined') {
      // Armazena as UTMs globalmente para uso nos botÃµes de checkout
      (window as any).fbAdsUtms = 'utm_source=FB&utm_campaign={{campaign.name}}|{{campaign.id}}&utm_medium={{adset.name}}|{{adset.id}}&utm_content={{ad.name}}|{{ad.id}}&utm_term={{placement}}&xcod=FBhQwK21wXxR{{campaign.name}}|{{campaign.id}}hQwK21wXxR{{adset.name}}|{{adset.id}}hQwK21wXxR{{ad.name}}|{{ad.id}}hQwK21wXxR{{placement}}';
      console.log('âœ… UTMs do Facebook Ads configuradas');
    }

  }, []);

  return (
    <main className="min-h-screen">
      {children}
    </main>
  );
};

export default Layout;