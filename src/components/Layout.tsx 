import { useEffect, ReactNode } from 'react';

interface LayoutProps {
  children: ReactNode;
}

const Layout = ({ children }: LayoutProps) => {
  useEffect(() => {
    // ========================================
    // ðŸŽ¯ PIXEL DA UTMIFY (RASTREAMENTO DE UTMs)
    // ========================================
    if (typeof window !== 'undefined') {
      (window as any).pixelId = "6958552db15cc93a035a8d66";
      const utmifyScript = document.createElement("script");
      utmifyScript.setAttribute("async", "");
      utmifyScript.setAttribute("defer", "");
      utmifyScript.setAttribute("src", "https://cdn.utmify.com.br/scripts/pixel/pixel.js");
      document.head.appendChild(utmifyScript);
      console.log('âœ… Pixel Utmify carregado');
    }

    // ========================================
    // ðŸŽ¯ PIXELS DE RASTREAMENTO - PAGEVIEW
    // ========================================
    
    // Facebook Pixel - PageView
    if (typeof window !== 'undefined' && (window as any).fbq) {
      (window as any).fbq('track', 'PageView');
      console.log('âœ… Facebook Pixel: PageView disparado');
    }

    // Google Analytics 4 - PageView
    if (typeof window !== 'undefined' && (window as any).gtag) {
      (window as any).gtag('config', 'G-XXXXXXXXXX', {
        page_path: window.location.pathname,
      });
      console.log('âœ… Google Analytics: PageView disparado');
    }

    // TikTok Pixel - PageView
    if (typeof window !== 'undefined' && (window as any).ttq) {
      (window as any).ttq.page();
      console.log('âœ… TikTok Pixel: PageView disparado');
    }

    // Google Tag Manager - PageView customizado
    if (typeof window !== 'undefined' && (window as any).dataLayer) {
      (window as any).dataLayer.push({
        event: 'pageview',
        page: window.location.pathname,
      });
      console.log('âœ… GTM: PageView customizado disparado');
    }

  }, []);

  return (
    <main className="min-h-screen">
      {children}
    </main>
  );
};

export default Layout;
